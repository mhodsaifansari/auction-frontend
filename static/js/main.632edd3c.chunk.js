(this.webpackJsonpauction=this.webpackJsonpauction||[]).push([[0],{35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var i=n(1),c=n.n(i),s=n(28),a=n.n(s),o=(n(35),n(3));n(36),n(37);var r=function(t){localStorage.removeItem("user"),t(!1)},l=n(0);var d=function(t){var e=t.isLogged,n=t.setLogged,c=Object(i.useRef)(null);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Auctions"})}),Object(l.jsx)("span",{children:!0===e?Object(l.jsxs)("span",{children:[" ",JSON.parse(localStorage.getItem("user")).user+" "," ",Object(l.jsx)("button",{className:"login",onClick:function(){r(n)},children:"Want to logout"})]}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("p",{children:[Object(l.jsx)("a",{className:"login-link",href:"/login",children:"Login"}),"/",Object(l.jsx)("a",{href:"/register",className:"register-link",children:"Register"})]})})})]}),Object(l.jsx)("button",{className:"nav-btn",onClick:function(){!function(t){0!==t.current&&(console.log(t.current),t.current.style.width="30%")}(c)},children:"more"}),Object(l.jsxs)("nav",{ref:c,children:[Object(l.jsx)("button",{onClick:function(){c.current.style.width="0"},children:"close"}),Object(l.jsx)("a",{className:"nav-link",href:"/",alt:"#",children:"Active Lisiting"}),Object(l.jsx)("a",{className:"nav-link",href:"/cateogry",alt:"#",children:"Cateogry"}),!0===e?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("a",{className:"nav-link",href:"/add-new-lisiting",alt:"Add new Lisiting",children:"Add New Lisiting"}),Object(l.jsx)("a",{className:"nav-link",href:"/watchlist",alt:"#",children:"Watchlist"}),Object(l.jsx)("a",{className:"nav-link",href:"/lisiting-won",alt:"#",children:"Lisiting Won"}),Object(l.jsx)("a",{className:"nav-link",href:"/my-lisiting",alt:"#",children:"My Lisiting"})]}):""]})]})},u=n(2),j=n(13),h=n(6),b=n(16),g=n.n(b),m=n(29),p=n(5),f=n.n(p),O=f.a.create();O.interceptors.request.use(function(){var t=Object(m.a)(g.a.mark((function t(e){var n,i,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("http://mhodsaifansari.pythonanywhere.com/verify",{token:JSON.parse(localStorage.user).access});case 3:return t.sent,e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.user).access),t.abrupt("return",e);case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,f.a.post("http://mhodsaifansari.pythonanywhere.com/refresh",{refresh:JSON.parse(localStorage.user).refresh});case 12:return n=t.sent,t.next=15,n.data.access;case 15:return i=t.sent,c=JSON.parse(localStorage.user),t.next=19,i;case 19:return c.access=t.sent,localStorage.setItem("user",JSON.stringify(c)),e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.user).access),t.abrupt("return",e);case 23:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)}));var x=O,v=function(t){return new Promise((function(e,n){var i;void 0!==localStorage.user?x.get("http://mhodsaifansari.pythonanywhere.com/api/view_list/"+t).then((function(n){(i=n.data).id=t,e(i)})).catch((function(t){n(t)})):f.a.get("http://mhodsaifansari.pythonanywhere.com/api/view_list/"+t).then((function(n){(i=n.data).id=t,e(i)})).catch((function(t){n(t)}))}))};var y=function(t){var e=t.isLogged,n=t.value;console.log(n);var c=Object(i.useState)({id:"",title:"",image:{src:"",alt:""},bid:"",description:"",owner:"",status:!1,belongs_to:null,comment:[],watchlist:!1,close_permit:void 0}),s=Object(o.a)(c,2),a=s[0],r=s[1];Object(i.useEffect)((function(){v(n).then((function(t){console.log(t),r({id:n,title:t.listing.title,image:{src:t.listing.image,alt:t.listing.title},bid:t.bid_data,description:t.listing.description,owner:t.listing.owner.username,comment:t.comments,status:t.listing.status,belongs_to:t.listing.belongs_to,watchlist:t.is_in_watchlist,close_permit:t.close_permit})})).catch((function(t){console.log(t)}))}),[]);var d=Object(i.useState)(""),u=Object(o.a)(d,2),j=u[0],b=u[1],g=Object(i.useState)(),m=Object(o.a)(g,2),p=m[0],f=m[1],O=function(t){x.post("http://mhodsaifansari.pythonanywhere.com/api/set_watchlist/"+n).then((function(t){!1===a.watchlist?r((function(t){return Object(h.a)(Object(h.a)({},t),{},{watchlist:!0})})):r((function(t){return Object(h.a)(Object(h.a)({},t),{},{watchlist:!1})}))})).catch((function(t){console.log(t)}))},y=a.title,w=a.image,N=a.bid,C=a.description,_=a.owner,L=a.comment,S=a.belongs_to,k=a.watchlist,I=a.close_permit,E=a.status,F=L.map((function(t){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"comment-div",children:[Object(l.jsx)("h5",{children:t.comment_by}),Object(l.jsx)("pre",{children:t.text})]})})}));return console.log(k),Object(l.jsxs)("div",{className:"listing-parent",children:[Object(l.jsxs)("div",{className:"listing",children:[Object(l.jsxs)("div",{className:"title-div",children:[Object(l.jsx)("h2",{children:y}),Object(l.jsxs)("p",{className:"belong_to",children:["by ",_]})]}),Object(l.jsxs)("div",{className:"content-div",children:[Object(l.jsx)("img",{src:w.src,alt:w.alt}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{className:"current-bid",children:["Current Bid : $",N]}),!0===e&&void 0!==k?!1===k?Object(l.jsx)("button",{className:"watchlist-btn watchlist-add",onClick:O,children:"Add To Watchlist"}):Object(l.jsx)("button",{className:"watchlist-remove",onClick:O,children:"Remove from watchlist"}):"",Object(l.jsx)("p",{className:"group",children:null==S?"No Cateogry":S}),Object(l.jsx)("pre",{className:"detail",children:C}),!0===e&&void 0!==I&&!0===I?!0===E?Object(l.jsx)("button",{onClick:function(t){x.post("http://mhodsaifansari.pythonanywhere.com/api/close/"+n).then((function(t){r((function(t){return Object(h.a)(Object(h.a)({},t),{},{close_permit:!1,status:!1})}))})).catch((function(t){console.log(t)}))},className:"close-btn close-bid",children:"Close the bid"}):Object(l.jsx)("p",{children:"Bid is Closed"}):"",!0===e&&1==E?Object(l.jsxs)("span",{className:"bid-input",children:[Object(l.jsx)("input",{type:"number",value:p,onChange:function(t){f(t.target.value)}}),Object(l.jsx)("button",{onClick:function(t){x.post("http://mhodsaifansari.pythonanywhere.com/api/bid/"+n,{bid:p}).then((function(t){console.log(t),v(n).then((function(t){console.log(t),r({id:n,title:t.listing.title,image:{src:t.listing.image,alt:t.listing.title},bid:t.bid_data,description:t.listing.description,owner:t.listing.owner.username,status:t.listing.status,comment:t.comments,belongs_to:t.listing.belongs_to,watchlist:t.is_in_watchlist,close_permit:t.close_permit})})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t.request.status),"403"==t.request.status&&console.log("Bid is closed")}))},className:"bid",children:"Bid"})]}):""]})]})]}),Object(l.jsxs)("div",{className:"comment-section",children:[Object(l.jsx)("h4",{children:"Comments"}),Object(l.jsx)("hr",{}),!0===e?Object(l.jsxs)("div",{children:[Object(l.jsx)("h5",{className:"comment-h5",children:"Comment"}),Object(l.jsx)("textarea",{className:"comment-textarea",value:j,onChange:function(t){b(t.target.value)}}),Object(l.jsx)("button",{onClick:function(t){x.post("http://mhodsaifansari.pythonanywhere.com/api/comment/"+n,{comment_text:j}).then((function(t){console.log(t),v(n).then((function(t){console.log(t),r({id:n,title:t.listing.title,image:{src:t.listing.image,alt:t.listing.title},bid:t.bid_data,description:t.listing.description,owner:t.listing.owner.username,status:t.listing.status,comment:t.comments,belongs_to:t.listing.belongs_to,watchlist:t.is_in_watchlist,close_permit:t.close_permit})})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},className:"comment-btn post-comment",children:"post"})]}):"",F===[]?Object(l.jsx)("h3",{children:"No comments"}):F]})]})};var w=function(){var t=Object(i.useState)([]),e=Object(o.a)(t,2),n=e[0],c=e[1],s=Object(i.useState)({title:"",description:"",bid:"",image:"",group:""}),a=Object(o.a)(s,2),r=a[0],d=a[1],u=Object(i.useState)({title:"",description:"",bid:""}),j=Object(o.a)(u,2),b=j[0],g=j[1],m=Object(i.useState)(""),p=Object(o.a)(m,2),O=p[0],v=p[1];Object(i.useEffect)((function(){f.a.get("http://mhodsaifansari.pythonanywhere.com/api/cateogry").then((function(t){console.log(t.data),c(t.data.map((function(t){return Object(l.jsx)("option",{value:t.id,children:t.text})})))})).catch((function(t){console.log(t)}))}),[]);var y=function(t,e){d((function(n){var i=Object(h.a)({},n);return i[e]=t.target.value,i}))};return Object(l.jsxs)("div",{className:"new-listing-form",children:[Object(l.jsx)("h3",{children:"Create a New Lisiting"}),Object(l.jsx)("div",{className:"listing-success",children:O}),Object(l.jsxs)("form",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"title",children:"Name :"}),Object(l.jsx)("input",{id:"title",type:"text",onChange:function(t){y(t,"title")},required:!0}),""!=b.title?Object(l.jsx)("div",{children:b.title}):""]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"description",children:"Description of Label: "}),Object(l.jsx)("textarea",{id:"description",cols:"4",rows:"5",onChange:function(t){y(t,"description")},required:!0}),""!=b.description?Object(l.jsx)("div",{children:b.description}):""]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"bid",children:"Inital Bid"}),Object(l.jsx)("input",{type:"number",id:"bid",onChange:function(t){y(t,"bid")},required:!0}),""!=b.bid?Object(l.jsx)("div",{children:b.bid}):""]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"image",children:"Image of Lisiting"}),Object(l.jsx)("input",{type:"text",onChange:function(t){y(t,"image")}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"category",children:"Cateogry"}),Object(l.jsxs)("select",{id:"category",placeholder:"No Category",onChange:function(t){y(t,"group")},children:[Object(l.jsx)("option",{value:"None",children:"No Cateogry"}),n]})]}),Object(l.jsx)("input",{className:"submit-active-lisitng",type:"submit",value:"Submit",onClick:function(t){t.preventDefault(),console.log(r),""!=r.title&&""!=r.description&&""!=r.bid?x.post("http://mhodsaifansari.pythonanywhere.com/api/create_list",r).then((function(t){v("LisTIng has been created successfully")})).catch((function(t){400==t.request.status&&console.log("Invalid input")})):(""==r.title&&g((function(t){return Object(h.a)(Object(h.a)({},t),{},{title:"Cannot leave Name Field Empty"})})),""==r.description&&g((function(t){return Object(h.a)(Object(h.a)({},t),{},{description:"Cannot leave Description Field Empty"})})),""==r.bid&&g((function(t){return Object(h.a)(Object(h.a)({},t),{},{bid:"Cannot leave Bid Field Empty"})})))}})]})]})},N=function(t,e){return new Promise((function(n,i){f.a.post("http://mhodsaifansari.pythonanywhere.com/api/login",{username:t,password:e}).then((function(t){n(t.data)})).catch((function(t){i(t)}))}))};var C=function(t){var e=t.isLogged,n=t.setLogged,c=Object(u.g)(),s=Object(i.useState)({username:"",password:""}),a=Object(o.a)(s,2),d=a[0],j=a[1];return Object(l.jsx)("div",{children:!0===e?Object(l.jsx)("button",{onClick:function(){r(n)},children:"want to logout"}):Object(l.jsxs)("form",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"username",children:"Enter Username: "}),Object(l.jsx)("input",{type:"text",id:"username",onChange:function(t){j((function(e){return{username:t.target.value,password:e.password}}))}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"password",children:"Enter Password: "}),Object(l.jsx)("input",{type:"password",id:"password",onChange:function(t){j((function(e){return{username:e.username,password:t.target.value}}))}})]}),Object(l.jsx)("input",{type:"Submit",value:"Login",onClick:function(t){t.preventDefault(),N(d.username,d.password).then((function(t){console.log(t),t.loggedIn=!0,console.log(t),localStorage.setItem("user",JSON.stringify(t)),n(!0),c.push("/")})).catch((function(t){console.log(t)}))},className:"login"})]})})};var _=function(t){var e=t.id,n=t.title,i=t.img,c=t.description,s=t.bid;return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsx)("img",{src:i.src,alt:i.alt}),Object(l.jsxs)("div",{className:"card-content",children:[Object(l.jsxs)("a",{className:"card-link",href:"/active/"+e,alt:n,children:[" ",n]}),Object(l.jsx)("p",{children:c}),Object(l.jsxs)("span",{children:["Current Bid: ",s]})]})]})},L=new Promise((function(t,e){var n;console.log("calling index"),f.a.get("http://mhodsaifansari.pythonanywhere.com/api/index").then((function(e){n=e.data,t(n)})).catch((function(t){e(t)}))})),S=function(t){return new Promise((function(e,n){f.a.get("http://mhodsaifansari.pythonanywhere.com/api/cateogry/"+t).then((function(t){console.log(t.data),e(t.data)})).catch((function(t){n(t)}))}))},k=function(){return new Promise((function(t,e){x.get("http://mhodsaifansari.pythonanywhere.com/api/watchlist").then((function(e){console.log(e.data),t(e.data)})).catch((function(t){e(t)}))}))},I=function(){return new Promise((function(t,e){x.get("http://mhodsaifansari.pythonanywhere.com/api/wonlist").then((function(e){console.log(e.data),t(e.data)})).catch((function(t){e(t)}))}))},E=function(){return new Promise((function(t,e){x.get("http://mhodsaifansari.pythonanywhere.com/api/mylist").then((function(e){console.log(e.data),t(e.data)})).catch((function(t){e(t)}))}))},F=function(t,e,n){return console.log(t),t.map((function(t,i){return Object(l.jsx)(_,{isLogged:n,id:t.id,title:t.title,img:{src:t.image,alt:t.title},bid:e[i],description:t.description})}))};var J=function(t){var e=Object(i.useState)({list:"",title:""}),n=Object(o.a)(e,2),c=n[0],s=n[1];return Object(i.useEffect)((function(){switch(t.type){case"Active":L.then((function(e){s({list:F(e.listing,e.bid_list,t.isLogged),title:"Active Listing"})})).catch((function(t){console.log(t)}));break;case"Watchlist":k().then((function(e){s({list:F(e.listing,e.bid_list,t.isLogged),title:"My Watchlist"})})).catch((function(t){console.log(t)}));break;case"Won":I().then((function(e){s({list:F(e.listing,e.bid_list,t.isLogged),title:"Listing Won "})})).catch((function(t){console.log(t)}));break;case"My List":E().then((function(e){s({list:F(e.listing,e.bid_list,t.isLogged),title:"My List "})})).catch((function(t){console.log(t)}));break;case"cateogry":S(t.group_of).then((function(e){s({list:F(e.listing,e.bid_list,t.isLogged),title:"Cateogry: "+t.group_of})})).catch((function(t){console.log(t)}))}}),[]),console.log(c.list),Object(l.jsxs)("div",{className:"card-container",children:[Object(l.jsx)("h2",{children:c.title}),Object(l.jsx)("div",{className:"Card-div",children:""!==c.list?0===c.list.length?"NO List is present":c.list:"Loading...."})]})};var A=function(t){var e=t.match,n=Object(i.useState)(""),c=Object(o.a)(n,2),s=c[0],a=c[1];return Object(i.useEffect)((function(){f.a.get("http://mhodsaifansari.pythonanywhere.com/api/cateogry").then((function(t){console.log(t.data);var n=t.data.map((function(t){return Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:e.url+"/"+t.text,className:"group-link",children:t.text})})}));a(n)})).catch((function(t){console.log(t)}))}),[]),Object(l.jsx)("div",{children:Object(l.jsx)("ul",{children:""===s?"Loading":s})})};var B=function(t){t.isLogged;var e=t.setLogged,n=Object(u.g)(),c=Object(i.useState)({username:"",password:"",confirmation:"",email:""}),s=Object(o.a)(c,2),a=s[0],r=s[1],d=function(t,e){r((function(n){var i=Object(h.a)({},n);return i[e]=t.target.value,i}))};return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"username",children:"Username"}),Object(l.jsx)("input",{type:"text",id:"username",onChange:function(t){d(t,"username")},value:a.username})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"password",children:"password"}),Object(l.jsx)("input",{type:"password",id:"password",onChange:function(t){d(t,"password")},value:a.password})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"confirmation",children:"re-enter password"}),Object(l.jsx)("input",{type:"password",id:"confirmation",onChange:function(t){d(t,"confirmation")},value:a.confirmation})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"email",children:"Email"}),Object(l.jsx)("input",{type:"email",id:"email",onChange:function(t){d(t,"email")},value:a.email})]}),Object(l.jsx)("input",{type:"submit",value:"Register",onClick:function(t){t.preventDefault(),console.log(a),f.a.post("http://mhodsaifansari.pythonanywhere.com/api/register",a).then((function(t){console.log(t.data),N(a.username,a.password).then((function(t){console.log(t),t.loggedIn=!0,console.log(t),localStorage.setItem("user",JSON.stringify(t)),e(!0),n.push("/")})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},className:"register"})]})})};function P(){try{return!0===JSON.parse(localStorage.getItem("user")).loggedIn}catch(t){return console.log(t),!1}}var W=function(){var t=Object(i.useState)(""),e=Object(o.a)(t,2),n=e[0],c=(e[1],Object(i.useState)(P)),s=Object(o.a)(c,2),a=s[0],r=s[1],h=function(t){return a?t:Object(l.jsx)(u.a,{to:"/"})};return Object(i.useEffect)((function(){r(P)}),[]),console.log(a),Object(l.jsx)(j.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"body-head",children:Object(l.jsx)(d,{isLogged:a,setLogged:r})}),Object(l.jsx)("div",{children:Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{exact:!0,path:"/",children:Object(l.jsx)(J,{type:"Active",list_data:n})}),Object(l.jsx)(u.b,{path:"/gh-pages/add-new-lisiting",children:a?Object(l.jsx)(w,{}):Object(l.jsx)(u.a,{to:"/"})}),Object(l.jsx)(u.b,{path:"/watchlist",children:h(Object(l.jsx)(J,{type:"Watchlist"}))}),Object(l.jsx)(u.b,{path:"/lisiting-won",children:h(Object(l.jsx)(J,{type:"Won"}))}),Object(l.jsx)(u.b,{path:"/my-lisiting",children:h(Object(l.jsx)(J,{type:"My List"}))}),Object(l.jsx)(u.b,{path:"/login",children:Object(l.jsx)(C,{isLogged:a,setLogged:r})}),Object(l.jsx)(u.b,{path:"/register",children:Object(l.jsx)(B,{isLogged:a,setLogged:r})}),Object(l.jsx)(u.b,{path:"/cateogry",component:function(t){return console.log(t),"/cateogry"===t.location.pathname?Object(l.jsx)(A,{match:t.match}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(J,{type:"cateogry",group_of:t.location.pathname.replace("/cateogry/","")})})}}),Object(l.jsx)(u.b,{path:"/active",component:function(t){return console.log(t),function(t){var e=t.location,n=t.match,i=e.pathname.replace(n.url+"/","");return Object(l.jsx)(u.b,{path:n.url+"/"+i,children:Object(l.jsx)(y,{isLogged:a,value:i})})}(t)}})]})})]})})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),i(t),c(t),s(t),a(t)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(W,{})}),document.getElementById("root")),q()}},[[63,1,2]]]);
//# sourceMappingURL=main.632edd3c.chunk.js.map